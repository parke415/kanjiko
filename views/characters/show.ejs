<%- include('../partials/header') %>
<h2>(<span <%- character.learned ? 'style="color: #00bbbb;"' : 'style="color: #bb0000;"' %>><%= character.learned ? 'LEARNED' : 'LEARNING' %></span>)</h2>
<div class="char" id="featured" <%- character.learned ? 'style="border-color: #337777; background-color: #77bbbb;"' : 'style="border-color: #773333; background-color: #bb7777;"' %>><%= character.glyph %></div>
<br>
<br>
<div>Strokes: <%= character.strokes %></div>
<% if (character.variants) { %>
<div>Variant<%= character.variants.length > 1 ? 's' : '' %>: <%= character.variants.split('').join(' / ') %></div>
<% }; %>
<% character.meanings.split('; ').forEach((meaning, idx) => { %>
<div>Meaning<%= character.meanings.split('; ').length > 1 ? ` #${idx+1}` : '' %>: <%= meaning %></div>
<% }); %>
<div>Readings:</div>
<ul>
  <% character.readings.forEach(reading => { %>
  <li><%= reading.sound %><span class="detail"><%= reading.definition ? ` (#${reading.definition})` : '' %><br><%= reading.language %><%= reading.register ? ` (${reading.register})` : '' %></span></li>
  <% }); %>
</ul>
<form action="/characters/<%= character.id %>/readings" method="POST" autocomplete="off">
  <select name="language">
    <option value="Japanese">Japanese</option>
    <option value="Mandarin">Mandarin</option>
    <option value="Cantonese">Cantonese</option>
    <option value="Korean">Korean</option>
    <option value="Middle Chinese">Middle Chinese</option>
  </select>
  &nbsp;
  <input type="text" name="sound" placeholder="pronunciation (required)">
  <% if (character.meanings.split('; ').length > 1) { %>
  &nbsp;
  <input type="number" name="definition" min="1" max="9" placeholder="#">
  <% }; %>
  <br>
  <input type="radio" name="register" value="native"><small>native</small>
  <input type="radio" name="register" value="Sinoxenic"><small>Sinoxenic</small>
  <input type="radio" name="register" value="colloquial"><small>colloquial</small>
  <input type="radio" name="register" value="literary"><small>literary</small>
  <br>
  <button type="submit">Add Reading</button>
</form>
<% if (character.readings.length > 0) { %>
  <form action="/characters/<%= character.id %>/deleteReadings?_method=DELETE" method="POST" autocomplete="off">
    <button type="submit"><%= character.readings.length > 1 ? 'Clear Readings' : 'Remove Reading' %></button>
  </form>
<% }; %>
<br>
<% if (character.compound) { %>
<div>Components:</div>
<ul>
  <% character.components.forEach(component => { %>
  <li><%= component.glyph %><span style="color: #777777;"><%= component.form ? `(${component.form})` : '' %></span><br><span class="detail"><%= component.role %></span></li>
  <% }); %>
</ul>
<form action="/characters/<%= character.id %>/components" method="POST" autocomplete="off">
  <input type="text" name="glyph" maxlength="1" placeholder="full form (required)">
  &nbsp;
  <input type="text" name="form" maxlength="1" placeholder="reduced form (optional)">
  <br>
  <input type="radio" name="role" value="semantic"><small>semantic</small>
  <input type="radio" name="role" value="phonetic"><small>phonetic</small>
  <input type="radio" name="role" value="phono-semantic"><small>phono-semantic</small>
  <br>
  <button type="submit">Add Component</button>
</form>
  <% if (character.components.length > 0) { %>
  <form action="/characters/<%= character.id %>/deleteComponents?_method=DELETE" method="POST" autocomplete="off">
    <button type="submit"><%= character.components.length > 1 ? 'Clear Components' : 'Remove Component' %></button>
  </form>
  <% }; %>
<br>
<% }; %>
<a href="/characters/<%= character._id %>/edit">Edit Character</a>
<br>
<br>
<form action="/characters/<%= character._id %>/learnToggle?_method=PUT" method="POST">
  <button type="submit"><%= character.learned ? 'LEARNING' : 'LEARNED' %></button>
</form>
<br>
<form action="/characters/<%= character._id %>?_method=DELETE" method="POST">
  <button type="submit">DELETE</button>
</form>
<%- include('../partials/footer') %>